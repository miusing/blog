"use strict";(self.webpackChunkakara=self.webpackChunkakara||[]).push([[7017],{1089:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>i,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"javascript/\u88c5\u9970\u5668","title":"Decorator","description":"","source":"@site/docs/javascript/\u88c5\u9970\u5668.md","sourceDirName":"javascript","slug":"/javascript/\u88c5\u9970\u5668","permalink":"/javascript/\u88c5\u9970\u5668","draft":false,"unlisted":false,"editUrl":"https://github.com/miusing/blog/tree/master/docs/javascript/\u88c5\u9970\u5668.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Proxy And Reflect","permalink":"/javascript/Proxy"},"next":{"title":"\u6742\u9879","permalink":"/javascript/\u6742\u9879"}}');var o=t(4848),a=t(8453);const s={},c="Decorator",i={},l=[];function p(n){const e={code:"code",h1:"h1",header:"header",pre:"pre",...(0,a.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"decorator",children:"Decorator"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// 1. \u7528\u4e8eclass\n// target\u8868\u793a\u7c7b\u672c\u8eab\nfunction setClassProperty(target) {\n   target.n = 'akara'\n}\n\n@setClassProperty\nclass People {\n   \n}\n\nconsole.log(People.n) // akara\n\n// 2. \u7528\u4e8e\u7c7b\u65b9\u6cd5\nfunction log(target, key, descriptor) {\n   const fn = descriptor.value\n   descriptor.value = function (...args) {\n       console.log(`calling ${key} with args: ${args}`)\n       return fn.apply(this, args)\n  }\n   return descriptor\n}\n\nclass People {\n   constructor(name, age) {\n       this.name = name\n       this.age = age\n  }\n\n   @log\n   getName() {\n       return this.name\n  }\n}\n\nconst p = new People('akara', 20)\nconsole.log(p.getName())\n\n// 3. \u7528\u4e8e\u5b9e\u4f8b\u5c5e\u6027\n// \u88c5\u9970\u5b9e\u4f8b\u5c5e\u6027\u7684\u65f6\u5019\uff0cdescriptor\u6709\u4e2a\u5c5e\u6027\u4e3ainitializer\n// \u901a\u8fc7\u4fee\u6539\u8fd9\u4e2a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u5b9e\u4f8b\u5316\u65f6\u7684\u5c5e\u6027\u503c\u4e5f\u4e0d\u540c\nfunction test(target, key, descriptor) {\n   const fn = descriptor.initializer\n   descriptor.initializer = function () {\n       const v = fn.apply(this)\n       const randomNumber = ~~(Math.random() * 1000)\n       return `${v}-${randomNumber}`\n  }\n}\n\nclass People {\n   @test\n   name = 'akara'\n}\n\nconst p = new People()\nconsole.log(p.name)\n"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-js",children:"// \u6267\u884c\u987a\u5e8f 1 3 4 2\nfunction f() {\n  console.log(1);\n  return function (\n    target,\n    key,\n    descriptor,\n  ) {\n    console.log(2);\n  };\n}\n\nfunction g() {\n  console.log(3);\n  return function (\n    target,\n    key,\n    descriptor,\n  ) {\n    console.log(4);\n  };\n}\n\nclass C {\n  @f()\n  @g()\n  method() {}\n}\n\n// @f @g test \u76f8\u5f53\u4e8e\u6570\u5b66\u4e2d\u7684 f(g(test))\n"})})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>c});var r=t(6540);const o={},a=r.createContext(o);function s(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),r.createElement(a.Provider,{value:e},n.children)}}}]);